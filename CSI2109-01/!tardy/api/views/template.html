<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>Geolocation and Google Maps API</title>
	<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
	<script>
		function writeAddressName(latLng) {
			// Geocoding
			var geocoder = new google.maps.Geocoder();
			geocoder.geocode({
				"location": latLng
			},
				function (results, status) {
					if (status == google.maps.GeocoderStatus.OK)
						document.getElementById("address").innerHTML = results[0].formatted_address;
					else
						document.getElementById("error").innerHTML += "Unable to retrieve your address" + "<br />";
				});
		}

		function geolocationSuccess(position) {
			var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
			var destLatLng = new google.maps.LatLng(37.56321481, 126.9524374);
			// Write the formatted address
			writeAddressName(userLatLng);

			var myOptions = {
				zoom: 16,
				center: userLatLng,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			};

			// Draw the map
			var mapObject = new google.maps.Map(document.getElementById("map"), myOptions);
			// Place the marker
			drawMarker(position.coords.latitude, position.coords.longitude, mapObject);

			// Draw polylines
			var routePlanCoordinates = [
				{ lat: 37.560497, lng: 126.935164 },
				{ lat: 37.561232, lng: 126.935410 }
			];
			drawPolyLine(routePlanCoordinates, mapObject);

			// Draw a circle around the user position to have an idea of the current localization accuracy
			var circle = new google.maps.Circle({
				center: userLatLng,
				radius: position.coords.accuracy,
				map: mapObject,
				fillColor: '#0000FF',
				fillOpacity: 0.5,
				strokeColor: '#0000FF',
				strokeOpacity: 1.0
			});
			mapObject.fitBounds(circle.getBounds());

			cccallMapObjApiAJAX(userLatLng, destLatLng, "2:2:240:242", mapObject);
		}

		function geolocationError(positionError) {
			document.getElementById("error").innerHTML += "Error: " + positionError.message + "<br />";
		}

		function geolocateUser() {
			// If the browser supports the Geolocation API
			if (navigator.geolocation) {
				var positionOptions = {
					enableHighAccuracy: true,
					timeout: 10 * 1000 // 10 seconds
				};
				navigator.geolocation.getCurrentPosition(geolocationSuccess, geolocationError, positionOptions);
			}
			else
				document.getElementById("error").innerHTML += "Your browser doesn't support the Geolocation API";
		}

		//***********************************
		// using Odsay traffic API
		//***********************************
		// sx: longitude of starting point
		// sy: latitude of starting point
		// ex: longitude of destination point
		// ey: latitude of destination point
		// function searchPubTransPathAJAX(sx, sy, ex, ey) {
			// var xhr = new XMLHttpRequest();
			// var url = "https://api.odsay.com/api/searchPubTransPath?SX="+sx+"&SY="+sy+"&EX="+ex+"&EY="+ey+"&apiKey=rZEorWeqCK/Z8vi/fUSzOA";
			// xhr.open("GET", encodeURI(url), true);
			// xhr.send();
			// xhr.onreadystatechange = function() {
			// 	if (xhr.readyState == 4 && xhr.status == 200) {
			// 	console.log( JSON.parse(xhr.responseText) ); // <- xhr.responseText 로 결과를 가져올 수 있음

			// 	//노선그래픽 데이터 호출
			// 	callMapObjApiAJAX((JSON.parse(xhr.responseText)).result.path[0].info.mapObj);
			// 	}
			// }
			// var responseText = {
			// 	"result": {
			// 		"path": [
			// 			{
			// 				"pathType": 1,
			// 				"subPath": [
			// 					{
			// 						"trafficType": 1,
			// 						"distance": 2000,
			// 						"sectionTime": 9,
			// 						"lane": {
			// 							"name": "수도권 2호선",
			// 							"subwaycode": 2,
			// 							"subwayCityCode": 1000
			// 						},
			// 						"stationCount": 1,
			// 						"passStopList": {
			// 							"stations": [
			// 								{
			// 									"index": 0,
			// 									"stationName": "당산",
			// 									"stationID": 237,
			// 									"x": 126.902682,
			// 									"y": 37.534863
			// 								},
			// 								{
			// 									"index": 1,
			// 									"stationName": "합정",
			// 									"stationID": 238,
			// 									"x": 126.914543,
			// 									"y": 37.549942
			// 								}
			// 							]
			// 						},
			// 						"way": "합정",
			// 						"wayCode": 2,
			// 						"startX": 126.90267725576584,
			// 						"startY": 37.534862332279936,
			// 						"startID": 237,
			// 						"startName": "당산",
			// 						"endExitNo": "",
			// 						"endExitX": 0.0,
			// 						"endExitY": 0.0,
			// 						"endX": 126.91454311097073,
			// 						"endY": 37.549938143345756,
			// 						"endID": 238,
			// 						"endName": "합정"
			// 					}
			// 				],
			// 				"info": {
			// 					"mapObj": "2:2:237:238",
			// 					"payment": 1250,
			// 					"busTransitCount": 0,
			// 					"subwayTransitCount": 1,
			// 					"busStationCount": 0,
			// 					"subwayStationCount": 1,
			// 					"totalStationCount": 1,
			// 					"totalTime": 9,
			// 					"totalWalk": 0,
			// 					"trafficDistance": 2000,
			// 					"totalDistance": 2000,
			// 					"firstStartStation": "당산",
			// 					"lastEndStation": "합정",
			// 					"totalWalkTime": -1
			// 				}
			// 			}
			// 		],
			// 		"searchType": 0,
			// 		"startRadius": 700,
			// 		"endRadius": 700,
			// 		"subwayCount": 1,
			// 		"busCount": 10,
			// 		"subwayBusCount": 0,
			// 		"pointDistance": 1967,
			// 		"outTrafficCheck": 0
			// 	}
			// };

		// }

		// 길찾기 API 호출
		//searchPubTransPathAJAX();


		function callMapObjApiAJAX(userLatLng, destLatLng, pathInfo, mapObject){
			var xhr = new XMLHttpRequest();
			var url = "https://api.odsay.com/api/loadLane?mapObject=0:0@"+ pathInfo +"&apiKey=rZEorWeqCK/Z8vi/fUSzOA";
			xhr.open("GET", encodeURI(url), true);
			xhr.send();
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 && xhr.status == 200) {

				var resultJsonData = JSON.parse(xhr.responseText);
				var sx = userLatLng.lng();
				var sy = userLatLng.lat();
				var ex = destLatLng.lng();
				var ey = destLatLng.lat();
				
				drawMarker(sx, sy, mapObject);		// 출발지 마커 표시
				drawMarker(ex, ey, mapObject);		// 도착지 마커 표시
				//drawPolyLine(resultJsonData);		// 노선그래픽데이터 지도위 표시
				var routePlanCoordinates = [];
				var pathNodes = resultJsonData.result.lane[0].section[0].graphPos;
				for(var i = 0; i < pathNodes.length; i++)
				{
					routePlanCoordinates.push({ lat: pathNodes[i]["y"], lng: pathNodes[i]["x"]})
				}
				drawPolyLine(routePlanCoordinates, mapObject);
				

				// boundary 데이터가 있을경우, 해당 boundary로 지도이동
				if(resultJsonData.result.boundary){
					var boundary = new google.maps.LatLngBounds(
			                new google.maps.LatLng(resultJsonData.result.boundary.bottom, resultJsonData.result.boundary.left),
			                new google.maps.LatLng(resultJsonData.result.boundary.top, resultJsonData.result.boundary.right)
			                );
					map.panToBounds(boundary);
				}
				}
			}
		}

		function cccallMapObjApiAJAX(userLatLng, destLatLng, pathInfo, mapObject){

			var sx = userLatLng.lng();
			var sy = userLatLng.lat();
			var ex = destLatLng.lng();
			var ey = destLatLng.lat();
			
			drawMarker(sx, sy, mapObject);		// 출발지 마커 표시
			drawMarker(ex, ey, mapObject);		// 도착지 마커 표시
			//drawPolyLine(resultJsonData);		// 노선그래픽데이터 지도위 표시
			var routePlanCoordinates = [];
			var pathNodes = [
							{
								"x": 126.90279893237107,
								"y": 37.53505267910727
							},
							{
								"x": 126.90295441751499,
								"y": 37.535252350822496
							},
							{
								"x": 126.90542387306891,
								"y": 37.538158567848456
							},
							{
								"x": 126.90627030824251,
								"y": 37.539085462186115
							},
							{
								"x": 126.90862936620717,
								"y": 37.54181939302154
							},
							{
								"x": 126.91007572532776,
								"y": 37.54351768049038
							},
							{
								"x": 126.91062097180777,
								"y": 37.54415343377903
							},
							{
								"x": 126.91118807170065,
								"y": 37.54484344819803
							},
							{
								"x": 126.91155400067308,
								"y": 37.54536041040328
							},
							{
								"x": 126.91177310269981,
								"y": 37.54585799926211
							},
							{
								"x": 126.91238163542596,
								"y": 37.54759359526739
							},
							{
								"x": 126.91284537148901,
								"y": 37.54839077538058
							},
							{
								"x": 126.91325567569551,
								"y": 37.54897121301543
							},
							{
								"x": 126.9133447616544,
								"y": 37.5490711462325
							},
							{
								"x": 126.91366846747242,
								"y": 37.549380474583316
							},
							{
								"x": 126.9144173352787,
								"y": 37.55002709148616
							},
							{
								"x": 126.9144173352787,
								"y": 37.55002709148616
							},
							{
								"x": 126.91562728871351,
								"y": 37.55087616249252
							},
							{
								"x": 126.91687121704615,
								"y": 37.55172553243635
							},
							{
								"x": 126.91842876871691,
								"y": 37.5528030188704
							},
							{
								"x": 126.92181028291223,
								"y": 37.55532978651076
							},
							{
								"x": 126.92391472715092,
								"y": 37.55695281100758
							},
							{
								"x": 126.92391472715092,
								"y": 37.55695281100758
							},
							{
								"x": 126.92463097295726,
								"y": 37.557517972884526
							},
							{
								"x": 126.9252465416926,
								"y": 37.558001121649724
							},
							{
								"x": 126.92585157654973,
								"y": 37.558430109161264
							},
							{
								"x": 126.92629035096665,
								"y": 37.55861430306486
							},
							{
								"x": 126.9266632913554,
								"y": 37.55865373137171
							},
							{
								"x": 126.92701514676162,
								"y": 37.55858484243621
							},
							{
								"x": 126.92727698267966,
								"y": 37.558479094043335
							},
							{
								"x": 126.9294614052201,
								"y": 37.55768796077752
							},
							{
								"x": 126.93130409892366,
								"y": 37.557046874636086
							},
							{
								"x": 126.93329464647294,
								"y": 37.55635303128064
							},
							{
								"x": 126.9360816591384,
								"y": 37.55535997090779
							},
							{
								"x": 126.93645637955113,
								"y": 37.555273238603114
							},
							{
								"x": 126.93684177635454,
								"y": 37.55523165313231
							},
							{
								"x": 126.93684177635454,
								"y": 37.55523165313231
							},
							{
								"x": 126.93704559928992,
								"y": 37.55522447555431
							},
							{
								"x": 126.9374522230065,
								"y": 37.55528219338327
							},
							{
								"x": 126.93789215810334,
								"y": 37.555385261114886
							},
							{
								"x": 126.93864691293928,
								"y": 37.55563532049642
							},
							{
								"x": 126.93918780732035,
								"y": 37.55580236259974
							},
							{
								"x": 126.94097898046377,
								"y": 37.55639508762492
							},
							{
								"x": 126.9418144994553,
								"y": 37.556537725450966
							},
							{
								"x": 126.94580597102708,
								"y": 37.556807656578584
							},
							{
								"x": 126.94580597102708,
								"y": 37.556807656578584
							},
							{
								"x": 126.94833900894666,
								"y": 37.55696537338475
							},
							{
								"x": 126.95617597277845,
								"y": 37.55743128792515
							},
							{
								"x": 126.95617597277845,
								"y": 37.55743128792515
							},
							{
								"x": 126.95871344121294,
								"y": 37.557273456882065
							},
							{
								"x": 126.95941533216181,
								"y": 37.5572616162042
							},
							{
								"x": 126.95950486554084,
								"y": 37.55733448758297
							},
							{
								"x": 126.95961678250977,
								"y": 37.55742557671338
							},
							{
								"x": 126.95992096070772,
								"y": 37.557527367782086
							},
							{
								"x": 126.96128700060484,
								"y": 37.55859359680877
							},
							{
								"x": 126.96163408153478,
								"y": 37.55886695834737
							},
							{
								"x": 126.96192632721949,
								"y": 37.55901369155024
							},
							{
								"x": 126.96273940934309,
								"y": 37.5591469741819
							},
							{
								"x": 126.96325974581735,
								"y": 37.55916955931531
							},
							{
								"x": 126.96357575185534,
								"y": 37.559235403066175
							},
							{
								"x": 126.96395816609775,
								"y": 37.55940995298293
							},
							{
								"x": 126.96464265918131,
								"y": 37.55983943932551
							},
							{
								"x": 126.96464265918131,
								"y": 37.55983943932551
							},
							{
								"x": 126.96683137330879,
								"y": 37.56117410869063
							},
							{
								"x": 126.96730335111025,
								"y": 37.56142151386451
							},
							{
								"x": 126.96772085507988,
								"y": 37.561515264420215
							},
							{
								"x": 126.9709361847268,
								"y": 37.56228215126673
							},
							{
								"x": 126.97359849560723,
								"y": 37.562936025592904
							},
							{
								"x": 126.97410581778655,
								"y": 37.56308459595228
							},
							{
								"x": 126.97526562741137,
								"y": 37.56352715528475
							},
							{
								"x": 126.97526562741137,
								"y": 37.56352715528475
							},
							{
								"x": 126.97644796358111,
								"y": 37.56397890873357
							},
							{
								"x": 126.97699823256889,
								"y": 37.56429903652368
							},
							{
								"x": 126.97707389011713,
								"y": 37.56456099337559
							},
							{
								"x": 126.97714622657129,
								"y": 37.56506620274045
							},
							{
								"x": 126.97737431143874,
								"y": 37.56577098862867
							},
							{
								"x": 126.97746350365573,
								"y": 37.56587087475232
							},
							{
								"x": 126.97760977882754,
								"y": 37.565935212839044
							},
							{
								"x": 126.97783552734461,
								"y": 37.565982217117316
							},
							{
								"x": 126.97811798995146,
								"y": 37.56602070081391
							},
							{
								"x": 126.97842333497735,
								"y": 37.56604136074531
							},
							{
								"x": 126.9818643092177,
								"y": 37.566053025626786
							},
							{
								"x": 126.9818643092177,
								"y": 37.566053025626786
							},
							{
								"x": 126.9822944006343,
								"y": 37.566056729027245
							},
							{
								"x": 126.98391253661157,
								"y": 37.56609767958398
							},
							{
								"x": 126.98763574295927,
								"y": 37.56616566426997
							},
							{
								"x": 126.99166382398212,
								"y": 37.56629019493915
							},
							{
								"x": 126.99166382398212,
								"y": 37.56629019493915
							},
							{
								"x": 126.99806623442976,
								"y": 37.56662395433274
							},
							{
								"x": 126.99806623442976,
								"y": 37.56662395433274
							},
							{
								"x": 127.00164067017229,
								"y": 37.56681638253436
							},
							{
								"x": 127.00240960010555,
								"y": 37.566876936293056
							},
							{
								"x": 127.00269231997171,
								"y": 37.56689734256842
							},
							{
								"x": 127.00437091574462,
								"y": 37.56665018889684
							},
							{
								"x": 127.0065496583481,
								"y": 37.56624502740766
							},
							{
								"x": 127.00733253208115,
								"y": 37.56610743661508
							},
							{
								"x": 127.00770734852763,
								"y": 37.56601146844276
							},
							{
								"x": 127.00815019291673,
								"y": 37.565907059396466
							},
							{
								"x": 127.00918468348978,
								"y": 37.56557333733264
							},
							{
								"x": 127.00918468348978,
								"y": 37.56557333733264
							},
							{
								"x": 127.01094697759628,
								"y": 37.56498439440605
							},
							{
								"x": 127.0113894549274,
								"y": 37.56490700138493
							},
							{
								"x": 127.01197847271332,
								"y": 37.564875883694484
							},
							{
								"x": 127.01619350934644,
								"y": 37.56541561986833
							},
							{
								"x": 127.01900915123677,
								"y": 37.56563724694407
							},
							{
								"x": 127.01950691885901,
								"y": 37.565659397176255
							},
							{
								"x": 127.01950691885901,
								"y": 37.565659397176255
							},
							{
								"x": 127.02002744122377,
								"y": 37.56567272348321
							},
							{
								"x": 127.02094445663616,
								"y": 37.56566230034316
							},
							{
								"x": 127.02321398553602,
								"y": 37.56523055092
							},
							{
								"x": 127.02398515007054,
								"y": 37.56511978401679
							},
							{
								"x": 127.02580855227197,
								"y": 37.56504471872375
							},
							{
								"x": 127.02687351594429,
								"y": 37.56497239531497
							},
							{
								"x": 127.02853064496071,
								"y": 37.56462560552854
							},
							{
								"x": 127.02853064496071,
								"y": 37.56462560552854
							},
							{
								"x": 127.02918989917687,
								"y": 37.564414769877565
							},
							{
								"x": 127.03007644450282,
								"y": 37.56413371175907
							},
							{
								"x": 127.03074829042124,
								"y": 37.56382385559487
							},
							{
								"x": 127.03172757940864,
								"y": 37.563372346534045
							},
							{
								"x": 127.03280941561283,
								"y": 37.56286760543116
							},
							{
								"x": 127.03378937703454,
								"y": 37.56236202177361
							},
							{
								"x": 127.03510264512461,
								"y": 37.56146269006449
							},
							{
								"x": 127.03539887675603,
								"y": 37.56131192937654
							},
							{
								"x": 127.03565976276218,
								"y": 37.56126900523515
							},
							{
								"x": 127.03750535133766,
								"y": 37.561220970947666
							},
							{
								"x": 127.03750535133766,
								"y": 37.561220970947666
							},
							{
								"x": 127.0385465756871,
								"y": 37.561229442742544
							},
							{
								"x": 127.03959911813577,
								"y": 37.56123799729159
							},
							{
								"x": 127.04080987770426,
								"y": 37.56126584708365
							},
							{
								"x": 127.04129769043836,
								"y": 37.5611796989052
							},
							{
								"x": 127.04200445407577,
								"y": 37.560788966994174
							},
							{
								"x": 127.04245102196342,
								"y": 37.5603871133182
							},
							{
								"x": 127.04285277546275,
								"y": 37.559948853226786
							},
							{
								"x": 127.0431437661858,
								"y": 37.559320475424755
							},
							{
								"x": 127.04329905946638,
								"y": 37.55868198841704
							},
							{
								"x": 127.04329602431697,
								"y": 37.55803320963908
							},
							{
								"x": 127.0432621436018,
								"y": 37.55714089832572
							},
							{
								"x": 127.04344961003684,
								"y": 37.555754801455414
							},
							{
								"x": 127.04344961003684,
								"y": 37.555754801455414
							},
							{
								"x": 127.04363833366004,
								"y": 37.55426959880071
							},
							{
								"x": 127.0438606535405,
								"y": 37.55281169856243
							},
							{
								"x": 127.04399605145325,
								"y": 37.55195679731189
							},
							{
								"x": 127.04422249237827,
								"y": 37.55017455150841
							},
							{
								"x": 127.04442864737997,
								"y": 37.54909495900207
							},
							{
								"x": 127.04461521278236,
								"y": 37.548663962997075
							},
							{
								"x": 127.0447879345014,
								"y": 37.54843108563212
							},
							{
								"x": 127.04503986510085,
								"y": 37.54819884771601
							},
							{
								"x": 127.04546198816891,
								"y": 37.54793194125905
							},
							{
								"x": 127.04626975675792,
								"y": 37.547596060383405
							},
							{
								"x": 127.04734954996464,
								"y": 37.54722632378256
							},
							{
								"x": 127.04734954996464,
								"y": 37.54722632378256
							},
							{
								"x": 127.05015579882424,
								"y": 37.54635685933963
							},
							{
								"x": 127.05167810971943,
								"y": 37.54589152105526
							},
							{
								"x": 127.05181446407565,
								"y": 37.54584756198379
							},
							{
								"x": 127.05596046308122,
								"y": 37.544619263110526
							},
							{
								"x": 127.05596046308122,
								"y": 37.544619263110526
							},
							{
								"x": 127.05956128605379,
								"y": 37.54353966193476
							},
							{
								"x": 127.0622760646291,
								"y": 37.54272324287871
							},
							{
								"x": 127.06920715383615,
								"y": 37.54044427601939
							},
							{
								"x": 127.06920715383615,
								"y": 37.54044427601939
							},
							{
								"x": 127.07066134320262,
								"y": 37.53997815497151
							},
							{
								"x": 127.07369512880004,
								"y": 37.53896574633761
							},
							{
								"x": 127.07445564059161,
								"y": 37.53877346911238
							},
							{
								"x": 127.0773273812621,
								"y": 37.538048035019365
							},
							{
								"x": 127.07958577986348,
								"y": 37.537506980035786
							},
							{
								"x": 127.08310376063923,
								"y": 37.53666929542656
							},
							{
								"x": 127.08357994331078,
								"y": 37.536591891376034
							},
							{
								"x": 127.08386279532908,
								"y": 37.53659408277437
							},
							{
								"x": 127.08416772543343,
								"y": 37.53664149713976
							},
							{
								"x": 127.08569073438419,
								"y": 37.53701370252371
							},
							{
								"x": 127.08569073438419,
								"y": 37.53701370252371
							},
							{
								"x": 127.08642362996478,
								"y": 37.537226608487
							},
							{
								"x": 127.08906338061337,
								"y": 37.53788671829731
							},
							{
								"x": 127.08970676434465,
								"y": 37.53801781963014
							},
							{
								"x": 127.09058873477755,
								"y": 37.53806965747485
							},
							{
								"x": 127.09142719569358,
								"y": 37.537976985885194
							},
							{
								"x": 127.09206308798339,
								"y": 37.53779264800786
							},
							{
								"x": 127.09292874955125,
								"y": 37.537321731876645
							},
							{
								"x": 127.09321421953048,
								"y": 37.53710766800138
							},
							{
								"x": 127.0936274101499,
								"y": 37.536624266058155
							},
							{
								"x": 127.0940287371858,
								"y": 37.53618582443609
							},
							{
								"x": 127.09464001923448,
								"y": 37.53522637724444
							},
							{
								"x": 127.09464001923448,
								"y": 37.53522637724444
							},
							{
								"x": 127.0959897002921,
								"y": 37.53308318062351
							},
							{
								"x": 127.09706225379861,
								"y": 37.53139739023312
							},
							{
								"x": 127.09795028227246,
								"y": 37.52999851996605
							},
							{
								"x": 127.09902253001387,
								"y": 37.52833072921073
							},
							{
								"x": 127.10145530079419,
								"y": 37.52452875722625
							},
							{
								"x": 127.10308189261323,
								"y": 37.52190100607665
							},
							{
								"x": 127.10359027233751,
								"y": 37.521012813292096
							},
							{
								"x": 127.1040177371156,
								"y": 37.52026817442715
							},
							{
								"x": 127.1040177371156,
								"y": 37.52026817442715
							},
							{
								"x": 127.10485173733812,
								"y": 37.51863456405758
							},
							{
								"x": 127.10501933750793,
								"y": 37.51786092265903
							},
							{
								"x": 127.1050264284881,
								"y": 37.51726627820651
							},
							{
								"x": 127.10487677510967,
								"y": 37.51653528904353
							},
							{
								"x": 127.1048231209072,
								"y": 37.51629159740377
							},
							{
								"x": 127.10441278143766,
								"y": 37.515603687472925
							},
							{
								"x": 127.10375274959651,
								"y": 37.51498596923206
							},
							{
								"x": 127.10324860388667,
								"y": 37.51457667246262
							},
							{
								"x": 127.1005707735658,
								"y": 37.51337595664367
							},
							{
								"x": 127.10034531690825,
								"y": 37.51331116817903
							},
							{
								"x": 127.10034531690825,
								"y": 37.51331116817903
							},
							{
								"x": 127.09929688921171,
								"y": 37.513014851588565
							},
							{
								"x": 127.097808659111,
								"y": 37.51260704542087
							},
							{
								"x": 127.09704127904962,
								"y": 37.512457021225856
							},
							{
								"x": 127.09602550619331,
								"y": 37.5122690518869
							},
							{
								"x": 127.09393601061026,
								"y": 37.51200978074486
							},
							{
								"x": 127.09241095874378,
								"y": 37.5118449103209
							},
							{
								"x": 127.09021882228613,
								"y": 37.51165687061385
							},
							{
								"x": 127.08793566790781,
								"y": 37.511513141428935
							},
							{
								"x": 127.0865326419616,
								"y": 37.51154736860021
							},
							{
								"x": 127.0865326419616,
								"y": 37.51154736860021
							},
							{
								"x": 127.08150778313801,
								"y": 37.51176075619011
							},
							{
								"x": 127.07863341404791,
								"y": 37.51186455121506
							},
							{
								"x": 127.07795523695292,
								"y": 37.5118232247965
							},
							{
								"x": 127.07646560025464,
								"y": 37.5115412873178
							},
							{
								"x": 127.0754158533634,
								"y": 37.511361886344126
							},
							{
								"x": 127.07347460659686,
								"y": 37.51101330660176
							},
							{
								"x": 127.07346329641071,
								"y": 37.511013218014874
							},
							{
								"x": 127.07042654826662,
								"y": 37.51052985472988
							},
							{
								"x": 127.0675139153561,
								"y": 37.51007442366976
							},
							{
								"x": 127.06706252213087,
								"y": 37.50998976947181
							},
							{
								"x": 127.06636298237358,
								"y": 37.509849091917445
							},
							{
								"x": 127.06519067078507,
								"y": 37.50952446384198
							},
							{
								"x": 127.06266658390624,
								"y": 37.50875661368435
							},
							{
								"x": 127.06265527409535,
								"y": 37.50875652406721
							},
							{
								"x": 127.05886941219357,
								"y": 37.507591133965875
							},
							{
								"x": 127.0553543031183,
								"y": 37.506490859276816
							},
							{
								"x": 127.048987870676,
								"y": 37.5045926838595
							},
							{
								"x": 127.048987870676,
								"y": 37.5045926838595
							},
							{
								"x": 127.04771519500981,
								"y": 37.50416795985911
							},
							{
								"x": 127.04404289474564,
								"y": 37.503003010298514
							},
							{
								"x": 127.04153102120534,
								"y": 37.502198766499184
							},
							{
								"x": 127.03623568799667,
								"y": 37.500614938603
							},
							{
								"x": 127.03623568799667,
								"y": 37.500614938603
							},
							{
								"x": 127.03158340987896,
								"y": 37.49917129844382
							},
							{
								"x": 127.02926299335915,
								"y": 37.498449456856896
							},
							{
								"x": 127.0278098416576,
								"y": 37.498005016955496
							},
							{
								"x": 127.0278098416576,
								"y": 37.498005016955496
							},
							{
								"x": 127.02132129159938,
								"y": 37.496041278072965
							},
							{
								"x": 127.01452920598473,
								"y": 37.493966529302355
							},
							{
								"x": 127.01451789856408,
								"y": 37.49396643510811
							},
							{
								"x": 127.0078847337985,
								"y": 37.49187460835707
							},
							{
								"x": 127.0078847337985,
								"y": 37.49187460835707
							},
							{
								"x": 127.0065438388527,
								"y": 37.49151194411826
							},
							{
								"x": 127.00590243891575,
								"y": 37.49127228183324
							},
							{
								"x": 127.00547563655263,
								"y": 37.49105244142633
							},
							{
								"x": 127.00516226386016,
								"y": 37.490806521756134
							},
							{
								"x": 127.00489579175596,
								"y": 37.49043484807655
							},
							{
								"x": 127.0047210898181,
								"y": 37.489964829832346
							},
							{
								"x": 127.00464731472735,
								"y": 37.48955873436159
							},
							{
								"x": 127.00463684371073,
								"y": 37.489495572405495
							},
							{
								"x": 127.00432451209319,
								"y": 37.48746556986689
							},
							{
								"x": 127.00387274284135,
								"y": 37.48486672687625
							},
							{
								"x": 127.00361442272292,
								"y": 37.48388240078326
							},
							{
								"x": 127.00339428099915,
								"y": 37.483430018629065
							},
							{
								"x": 127.00313867070311,
								"y": 37.483094474474335
							},
							{
								"x": 127.00275941756188,
								"y": 37.482703824278694
							},
							{
								"x": 127.00246857986542,
								"y": 37.48246709788878
							},
							{
								"x": 127.00206420925363,
								"y": 37.4822654554435
							},
							{
								"x": 127.0014332502333,
								"y": 37.48209794162529
							},
							{
								"x": 126.99976482147186,
								"y": 37.48172342561362
							},
							{
								"x": 126.99822895227594,
								"y": 37.48158428312162
							},
							{
								"x": 126.99767666553103,
								"y": 37.48145345764877
							},
							{
								"x": 126.99711367658189,
								"y": 37.48127748609409
							},
							{
								"x": 126.99754051899491,
								"y": 37.48148834637478
							},
							{
								"x": 126.99564986974511,
								"y": 37.48082355146496
							},
							{
								"x": 126.99264401916308,
								"y": 37.4798518879881
							},
							{
								"x": 126.99151772977173,
								"y": 37.4795269234394
							},
							{
								"x": 126.99072975667177,
								"y": 37.47926790860694
							},
							{
								"x": 126.99006626610746,
								"y": 37.47900094065529
							},
							{
								"x": 126.98878548925245,
								"y": 37.47839530408941
							},
							{
								"x": 126.98794356124218,
								"y": 37.477946587911575
							},
							{
								"x": 126.98704560494143,
								"y": 37.47746134385512
							},
							{
								"x": 126.9863154088045,
								"y": 37.47711268879962
							},
							{
								"x": 126.98533724539251,
								"y": 37.476707839597864
							},
							{
								"x": 126.98388283536512,
								"y": 37.47640701980374
							},
							{
								"x": 126.98233251014491,
								"y": 37.47651083214184
							},
							{
								"x": 126.9809969702089,
								"y": 37.476616474195374
							},
							{
								"x": 126.98169908195182,
								"y": 37.47653241369998
							},
							{
								"x": 126.98022825139653,
								"y": 37.47660985089567
							},
							{
								"x": 126.97926649660114,
								"y": 37.47666463121179
							},
							{
								"x": 126.9774128957369,
								"y": 37.47662159321952
							},
							{
								"x": 126.97604613491357,
								"y": 37.476528677302056
							},
							{
								"x": 126.97400392865227,
								"y": 37.47622264747656
							},
							{
								"x": 126.97303505701413,
								"y": 37.47597095671453
							},
							{
								"x": 126.97221253475712,
								"y": 37.47576558221106
							},
							{
								"x": 126.97102938348193,
								"y": 37.47547597121158
							},
							{
								"x": 126.96976513437386,
								"y": 37.47532981100134
							},
							{
								"x": 126.96913208488195,
								"y": 37.47532429686989
							},
							{
								"x": 126.9682949370233,
								"y": 37.47536205247329
							},
							{
								"x": 126.96775133315656,
								"y": 37.4754293952509
							},
							{
								"x": 126.96713853943623,
								"y": 37.47559524750138
							},
							{
								"x": 126.96612711045178,
								"y": 37.47597386675385
							},
							{
								"x": 126.96374992685855,
								"y": 37.477007302822464
							},
							{
								"x": 126.96374992685855,
								"y": 37.477007302822464
							},
							{
								"x": 126.96132858006312,
								"y": 37.47795920791947
							},
							{
								"x": 126.95941876554228,
								"y": 37.47870832092446
							},
							{
								"x": 126.95422382900006,
								"y": 37.48071691457614
							},
							{
								"x": 126.9528043992744,
								"y": 37.48115488492148
							},
							{
								"x": 126.95255467844638,
								"y": 37.48122475837768
							},
							{
								"x": 126.95255467844638,
								"y": 37.48122475837768
							},
							{
								"x": 126.9520100142195,
								"y": 37.481364103097256
							},
							{
								"x": 126.94885066911237,
								"y": 37.48170550503054
							},
							{
								"x": 126.94606525957975,
								"y": 37.481987080579955
							},
							{
								"x": 126.94271354611348,
								"y": 37.48233561453708
							},
							{
								"x": 126.94271354611348,
								"y": 37.48233561453708
							},
							{
								"x": 126.94188710899196,
								"y": 37.48240932014002
							},
							{
								"x": 126.94158072025971,
								"y": 37.482487673932994
							},
							{
								"x": 126.9412852554603,
								"y": 37.482593156233044
							},
							{
								"x": 126.93873692768743,
								"y": 37.483696636584604
							},
							{
								"x": 126.93800891141375,
								"y": 37.48400547107771
							},
							{
								"x": 126.93655235095481,
								"y": 37.484659163724835
							},
							{
								"x": 126.9360978245965,
								"y": 37.48481726593147
							},
							{
								"x": 126.9357008464436,
								"y": 37.48490380008999
							},
							{
								"x": 126.93512374109461,
								"y": 37.48493464853656
							},
							{
								"x": 126.93488670298639,
								"y": 37.484905483009676
							},
							{
								"x": 126.93442367752505,
								"y": 37.48486527108607
							},
							{
								"x": 126.93004435921263,
								"y": 37.48431214354498
							},
							{
								"x": 126.93004435921263,
								"y": 37.48431214354498
							},
							{
								"x": 126.92823853828908,
								"y": 37.484079544483336
							},
							{
								"x": 126.92758358387255,
								"y": 37.48401954575381
							},
							{
								"x": 126.92706326839487,
								"y": 37.48403284865688
							},
							{
								"x": 126.9266772041863,
								"y": 37.48414648294746
							},
							{
								"x": 126.92622240351618,
								"y": 37.4843225655603
							},
							{
								"x": 126.92581230813857,
								"y": 37.48453509436103
							},
							{
								"x": 126.92516156774153,
								"y": 37.48497069789471
							},
							{
								"x": 126.92432541141083,
								"y": 37.48571997926584
							},
							{
								"x": 126.92307356929258,
								"y": 37.48706917397582
							},
							{
								"x": 126.92186535502483,
								"y": 37.488526878362634
							},
							{
								"x": 126.9214081878944,
								"y": 37.488865109315064
							},
							{
								"x": 126.92102040798362,
								"y": 37.48909584552406
							},
							{
								"x": 126.92048577217138,
								"y": 37.48931622981584
							},
							{
								"x": 126.91992955690402,
								"y": 37.48946433072081
							},
							{
								"x": 126.91971382812866,
								"y": 37.489525434154416
							},
							{
								"x": 126.91915760986475,
								"y": 37.489673531371366
							},
							{
								"x": 126.91856902678867,
								"y": 37.48971320422878
							},
							{
								"x": 126.91765346523377,
								"y": 37.48968680930844
							},
							{
								"x": 126.91693167272525,
								"y": 37.48955405582389
							},
							{
								"x": 126.91661639292225,
								"y": 37.4894610637814
							},
							{
								"x": 126.91634620943715,
								"y": 37.48937749452916
							},
							{
								"x": 126.91608759297114,
								"y": 37.48927600968457
							},
							{
								"x": 126.91590773151489,
								"y": 37.48920227753613
							},
							{
								"x": 126.91508926543732,
								"y": 37.48871721788431
							},
							{
								"x": 126.91346393200476,
								"y": 37.48772916722368
							},
							{
								"x": 126.91308291368232,
								"y": 37.48749139418043
							},
							{
								"x": 126.91308291368232,
								"y": 37.48749139418043
							},
							{
								"x": 126.91245551284915,
								"y": 37.48708916621441
							},
							{
								"x": 126.91167061862384,
								"y": 37.486631423104264
							},
							{
								"x": 126.91116498542225,
								"y": 37.486410518291024
							},
							{
								"x": 126.91061347841818,
								"y": 37.48623424128857
							},
							{
								"x": 126.90957791494704,
								"y": 37.485909332837295
							},
							{
								"x": 126.9085196181716,
								"y": 37.48559321607142
							},
							{
								"x": 126.90702211136926,
								"y": 37.4851558961977
							},
							{
								"x": 126.90643605090573,
								"y": 37.48502433292498
							},
							{
								"x": 126.9057143246128,
								"y": 37.484891511816365
							},
							{
								"x": 126.90514969813253,
								"y": 37.48484123481027
							},
							{
								"x": 126.90430177435346,
								"y": 37.484833383751564
							},
							{
								"x": 126.90324969162361,
								"y": 37.484868686299684
							},
							{
								"x": 126.90255925737131,
								"y": 37.48491634569879
							},
							{
								"x": 126.90191312306708,
								"y": 37.48502748566103
							},
							{
								"x": 126.90150440628189,
								"y": 37.48514082707946
							},
							{
								"x": 126.90116352249046,
								"y": 37.485254797217195
							},
							{
								"x": 126.90116352249046,
								"y": 37.485254797217195
							},
							{
								"x": 126.90083381156634,
								"y": 37.48537788066142
							},
							{
								"x": 126.89984269310223,
								"y": 37.48588226410645
							},
							{
								"x": 126.89836931577487,
								"y": 37.48688673536183
							},
							{
								"x": 126.89764805078235,
								"y": 37.48749272811781
							},
							{
								"x": 126.89719984050085,
								"y": 37.48798412624273
							},
							{
								"x": 126.8966447070982,
								"y": 37.4888259336255
							},
							{
								"x": 126.89639814205498,
								"y": 37.48944535584231
							},
							{
								"x": 126.89612776822813,
								"y": 37.4901456494765
							},
							{
								"x": 126.89559857658939,
								"y": 37.491528321513975
							},
							{
								"x": 126.89539854555993,
								"y": 37.492058071089104
							},
							{
								"x": 126.8949972816285,
								"y": 37.49319865196438
							},
							{
								"x": 126.8949972816285,
								"y": 37.49319865196438
							},
							{
								"x": 126.89428103048014,
								"y": 37.49499405054328
							},
							{
								"x": 126.89358990424213,
								"y": 37.49738436913348
							},
							{
								"x": 126.89346647271523,
								"y": 37.49808602989124
							},
							{
								"x": 126.89330659236278,
								"y": 37.49895854798068
							},
							{
								"x": 126.8930283321013,
								"y": 37.500956264087854
							},
							{
								"x": 126.89297089281027,
								"y": 37.50255057582284
							},
							{
								"x": 126.89299883908905,
								"y": 37.50295630751271
							},
							{
								"x": 126.89309347247631,
								"y": 37.504975532962305
							},
							{
								"x": 126.89285241632825,
								"y": 37.50598244616461
							},
							{
								"x": 126.89274465652944,
								"y": 37.50638690719244
							},
							{
								"x": 126.89249959331082,
								"y": 37.50689820766411
							},
							{
								"x": 126.89183862320021,
								"y": 37.50800030010269
							},
							{
								"x": 126.89137587940343,
								"y": 37.508698777268584
							},
							{
								"x": 126.89137587940343,
								"y": 37.508698777268584
							},
							{
								"x": 126.89054377092948,
								"y": 37.509898372261496
							},
							{
								"x": 126.88984908269805,
								"y": 37.51098211545798
							},
							{
								"x": 126.88985226242862,
								"y": 37.511531781646724
							},
							{
								"x": 126.88992463302601,
								"y": 37.511991992983035
							},
							{
								"x": 126.89006659531702,
								"y": 37.512335721837715
							},
							{
								"x": 126.89023317701397,
								"y": 37.51254452509752
							},
							{
								"x": 126.89047892826744,
								"y": 37.51275407093286
							},
							{
								"x": 126.8931176112964,
								"y": 37.514842186730284
							},
							{
								"x": 126.89344228355891,
								"y": 37.515070485958745
							},
							{
								"x": 126.89364387398108,
								"y": 37.515207528566776
							},
							{
								"x": 126.89403455167056,
								"y": 37.51556258968193
							},
							{
								"x": 126.89414526404582,
								"y": 37.51572581276635
							},
							{
								"x": 126.89424373721069,
								"y": 37.515951994301176
							},
							{
								"x": 126.89434008678826,
								"y": 37.51632232274183
							},
							{
								"x": 126.89439385073342,
								"y": 37.51651204439565
							},
							{
								"x": 126.89462821184958,
								"y": 37.51749637184529
							},
							{
								"x": 126.89462821184958,
								"y": 37.51749637184529
							},
							{
								"x": 126.89471325453621,
								"y": 37.51786659422127
							},
							{
								"x": 126.89501309964889,
								"y": 37.51901372043752
							},
							{
								"x": 126.8952800820259,
								"y": 37.520088455347455
							},
							{
								"x": 126.89620474593565,
								"y": 37.52413375860609
							},
							{
								"x": 126.89658943145479,
								"y": 37.52566911978235
							},
							{
								"x": 126.89658943145479,
								"y": 37.52566911978235
							},
							{
								"x": 126.89704854650567,
								"y": 37.527529548601265
							},
							{
								"x": 126.89719083429833,
								"y": 37.52785525063209
							},
							{
								"x": 126.89736811940628,
								"y": 37.528109195542015
							},
							{
								"x": 126.89884512188587,
								"y": 37.52999712544274
							},
							{
								"x": 126.90112192849529,
								"y": 37.532901638483885
							},
							{
								"x": 126.90279893237107,
								"y": 37.53505267910727
							},
							{
								"x": 126.90279893237107,
								"y": 37.53505267910727
							},
							{
								"x": 126.90295441751499,
								"y": 37.535252350822496
							},
							{
								"x": 126.90542387306891,
								"y": 37.538158567848456
							},
							{
								"x": 126.90627030824251,
								"y": 37.539085462186115
							},
							{
								"x": 126.90862936620717,
								"y": 37.54181939302154
							},
							{
								"x": 126.91007572532776,
								"y": 37.54351768049038
							},
							{
								"x": 126.91062097180777,
								"y": 37.54415343377903
							},
							{
								"x": 126.91118807170065,
								"y": 37.54484344819803
							},
							{
								"x": 126.91155400067308,
								"y": 37.54536041040328
							},
							{
								"x": 126.91177310269981,
								"y": 37.54585799926211
							},
							{
								"x": 126.91238163542596,
								"y": 37.54759359526739
							},
							{
								"x": 126.91284537148901,
								"y": 37.54839077538058
							},
							{
								"x": 126.91325567569551,
								"y": 37.54897121301543
							},
							{
								"x": 126.9133447616544,
								"y": 37.5490711462325
							},
							{
								"x": 126.91366846747242,
								"y": 37.549380474583316
							},
							{
								"x": 126.9144173352787,
								"y": 37.55002709148616
							}
						];


			for(var i = 0; i < pathNodes.length; i++)
			{
				routePlanCoordinates.push({ lat: pathNodes[i].y, lng: pathNodes[i].x})
			}
			drawPolyLine(routePlanCoordinates, mapObject);
			

		}

		// 지도위 마커 표시해주는 함수
		function drawMarker(x, y, mapObject) {
			var pos = new google.maps.LatLng(x, y);

			new google.maps.Marker({
				map: mapObject,
				position: pos
			});
		}

		// Draw polylines
		function drawPolyLine(routePlanCoordinates, mapObject){
			var routePath = new google.maps.Polyline({
				path: routePlanCoordinates,
				geodesic: true,
				strokeColor: '#FF0000',
				strokeOpacity: 1.0,
				strokeWeight: 2
			});

			routePath.setMap(mapObject);
		}

		// // 노선그래픽 데이터를 이용하여 지도위 폴리라인 그려주는 함수
		// function drawPolyLine(data){
		// 	var lineArray;

		// 	for(var i = 0 ; i < data.result.lane.length; i++){
		// 		for(var j=0 ; j <data.result.lane[i].section.length; j++){
		// 			lineArray = null;
		// 			lineArray = new Array();
		// 			for(var k=0 ; k < data.result.lane[i].section[j].graphPos.length; k++){
		// 				lineArray.push(new google.maps.LatLng(data.result.lane[i].section[j].graphPos[k].y, data.result.lane[i].section[j].graphPos[k].x));
		// 			}

		// 		//지하철결과의 경우 노선에 따른 라인색상 지정하는 부분 (1,2호선의 경우만 예로 들음)
		// 			if(data.result.lane[i].type == 1){
		// 				var polyline = new google.maps.Polyline({
		// 				    map: map,
		// 				    path: lineArray,
		// 				    strokeWeight: 3,
		// 				    strokeColor: '#003499'
		// 				});
		// 			}else if(data.result.lane[i].type == 2){
		// 				var polyline = new google.maps.Polyline({
		// 				    map: map,
		// 				    path: lineArray,
		// 				    strokeWeight: 3,
		// 				    strokeColor: '#37b42d'
		// 				});
		// 			}else{
		// 				var polyline = new google.maps.Polyline({
		// 				    map: map,
		// 				    path: lineArray,
		// 				    strokeWeight: 3
		// 				});
		// 			}

		// 		}
		// 	}
		
		window.onload = geolocateUser;
	</script>
	<style type="text/css">
		#map {
			width: 500px;
			height: 500px;
		}
	</style>
</head>

<body>
	<h1>Basic example</h1>
	<div id="map"></div>
	<p><b>Address</b>: <span id="address"></span></p>
	<p id="error"></p>
</body>

</html>